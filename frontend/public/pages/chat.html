<!--
 * @Author: FlowerRealm admin@flowerrealm.top
 * @Date: 2025-06-06 21:23:04
 * @LastEditors: FlowerRealm admin@flowerrealm.top
 * @LastEditTime: 2025-06-07 11:15:49
 * @FilePath: /GameConnecting/frontend/public/pages/chat.html
-->
<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>服务器聊天 - GameConnecting</title>
    <link rel="stylesheet" href="/styles/style.css">
    <link rel="stylesheet" href="/styles/pages/chat.css"> <!-- 新增聊天页面样式 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>

<body>
    <header>
        <nav class="navbar">
            <div class="navbar-content-wrapper"> <!-- 新增的包裹容器 -->
                <a href="/" class="navbar-brand">GameConnecting</a>
                <div class="navbar-menu" id="navMenu">
                    <!-- 导航项由navbar.js动态加载 -->
                </div>
                <div class="navbar-auth" id="authButtons">
                    <!-- 认证按钮或用户头像由navbar.js动态加载 -->
                </div>
            </div>
        </nav>
    </header>

    <!-- 全局通知容器 -->
    <div id="notification-container" class="notification-container">
        <!-- 通知将由 JavaScript 动态插入这里 -->
    </div>

    <main class="container chat-container">
        <div class="chat-main">
            <div class="chat-header">
                <h2 id="currentServerName">选择一个服务器</h2>
                <div class="server-status">
                    <i class="fas fa-users"></i> <span id="memberCount">0</span> 位成员在线
                </div>
                <button id="leaveServerButton" class="btn btn-danger btn-sm">离开服务器</button>
            </div>

            <div class="chat-body">
                <div class="chat-box" id="chatBox">
                    <!-- 聊天消息将在这里显示 -->
                </div>
                <div class="member-request-sidebar" id="memberRequestSidebar">
                    <div class="sidebar-tabs">
                        <button class="tab-button active" data-tab="members">成员列表</button>
                        <button class="tab-button" data-tab="requests">加入申请</button>
                    </div>
                    <div class="sidebar-content">
                        <div data-tab-content="members" class="active" id="memberListContainer">
                            <!-- 成员列表将在这里渲染 -->
                        </div>
                        <div data-tab-content="requests" id="joinRequestContainer">
                            <!-- 加入申请将在这里渲染 -->
                        </div>
                    </div>
                </div>
            </div>

            <div class="chat-input">
                <textarea id="messageInput" placeholder="输入消息..."></textarea>
                <button id="sendButton" class="btn btn-primary">发送</button>
            </div>
        </div>

        <!-- 消息模板 -->
        <template id="messageTemplate">
            <div class="message">
                <span class="username"></span>
                <span class="time"></span>
                <div class="content"></div>
            </div>
        </template>

        <!-- 成员模板 (如果需要更复杂的成员列表项) -->
        <!-- <template id="memberTemplate">
            <div class="member-item">
                <div class="member-avatar"></div>
                <div class="member-info">
                    <span class="member-name"></span>
                    <span class="member-role"></span>
                </div>
                <div class="member-actions"></div>
            </div>
        </template> -->

    </main>

    <script src="https://cdn.socket.io/4.7.2/socket.io.esm.min.js" type="module"></script>
    <script src="/js/config.js" type="module"></script>
    <script src="/js/store.js" type="module"></script>
    <script src="/js/apiService.js" type="module"></script>
    <script src="/js/auth.js" type="module"></script>
    <script src="/js/navbar.js" type="module"></script>
    <script src="/js/socket.js" type="module"></script> <!-- 使用现有的socketManager -->
    <script src="/js/chat.js" type="module"></script> <!-- ChatManager逻辑 -->
    <script src="/js/chatPage.js" type="module"></script> <!-- 新的页面入口文件 -->
    <script src="/js/chatPage_simple.js"></script> <!-- 简化版本用于测试离开服务器功能 -->


</body>

</html>